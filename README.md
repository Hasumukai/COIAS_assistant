# COIAS 小惑星探査支援ツール

このプログラムは、COIAS（Come On! Impacting ASteroids）による  
小惑星探査作業を支援するために開発された Python ベースの補助ツールです。

COIAS の画面上に透過ウィンドウとして重ねて使用する。
発見した小惑星候補をマークし、それらの位置と観測時刻を入力することで
軌道の可視化や、未検出フレームでの予測位置を表示します。

---

## 注意事項

### 使用上の注意
小惑星の探索は、COIAS公式の「使い方ガイド」に従い、画像を十分確認してからレポートを提出してください。
予測位置はあくまで予測です。画像上で小惑星が存在するかよく確認してください。

### 免責
本ツールは研究支援を目的として提供されるものであり、
正確性・完全性・動作保証を一切行いません。
本ツールの使用により発生したいかなる損害（データ損失、誤検出、誤解析、
観測作業への影響、その他の不利益を含む）についても、
開発者は一切の責任を負いません。
利用者自身の判断と責任においてご使用ください。

## 🚀 主な機能

### 1. 透過ウィンドウによる COIAS 画面へのオーバーレイ表示
- COIAS の画面上に重ねて使用する前提で設計。
- 透過ウィンドウ上でクリックした位置を取得し、軌跡描画に利用。

### 2. クリック位置に基づく直線軌跡の描画
- 透過ウィンドウ上でクリックした点を記録。
- 2 点以上の点を指定すると、直線軌跡を自動描画。
- 小惑星候補の移動方向を視覚的に把握可能。

### 3. 画像時刻に基づく未検出フレームでの位置予測
- COIAS 画面から画像の撮影時刻を自動抽出（OCR 等を利用）。
- 抽出した時刻と既知の軌跡から、  
  未検出フレームでの小惑星の予測位置を計算し、マーカーを表示。

### 4. 観測時刻の読みとり
- 画像処理（OCR）により、画像の観測時刻を取得。
- クリックした軌道位置への時刻割り当てや、位置予測に利用可能。

---

## 動作環境
以下の環境での動作を確認した。

OS：Windows11 64 bits

Python : 3.10

## 📦 インストール

```bash
git clone https://github.com/Hasumukai/COIAS_assistance.git
cd COIAS_assistance

pip install -r requirements.txt

```
## 実行方法
COIASを「手動測定/名前修正」まで進める。

以下を実行し、補助プログラムを起動する。

```bash
python3 COIAS_assistance_vX.X.py
```

### 1. 半透明なWindow(補助画面)と赤枠（時刻枠）が表示される。
### 2. COIASで表示されている時刻（hh:mm:ss）を時刻枠で囲むように、時刻枠を左ドラックで移動させる。
### 3. COIAS側で目視で、小惑星候補を探す。
### 4. 探した小惑星候補の上に補助画面を移動させる。
### 5. 補助画面の上から、探した小惑星候補の位置を左クリックする。小惑星候補が赤四角でマークされる。また、マーク時刻取得ボタンの下にセル（マーク時刻セル）が表示される。マーク位置を修正するには、そのマークの近傍で右クリックすることでマークを消せる。その後、再度、惑星候補上でクリックする。
### 6. マーク時刻取得ボタンをクリック。すると、マーク時刻セルに現在COIASで表示されている時刻が入力される。入力されない場合は、時刻枠中に時刻が入るように調整し、再度マーク時刻取得ボタンをクリックする。
### 7. 可能な限り3-6を繰り返す。2点のマークを打った時点で、緑色の直線が現れる。これは、マークされた小惑星候補から算出した軌跡である。小惑星候補は、この直線状に並ぶ。軌跡を参考に、小惑星候補を探し出す。

### 小惑星推定
小惑星候補が見つからない画像には、位置推定を行う。
- 小惑星候補が見つからない画像をCOIASで表示する。
- 推定時刻取得ボタンを押す。推定したい時刻が推定セルに入力される。
- 推定ボタンを押す。補助画面上に青い推定位置が表示される。COIAS上に小惑星候補が存在しないか確認する。存在しない場合には、諦める。推定位置を妄信しないこと。
